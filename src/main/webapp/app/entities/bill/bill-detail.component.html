<body id="exportPDF" >

<button *ngIf="bill.paymentStatus!=='INCOMPLETE'" type="submit" (click)="generatePdf(bill.id)"
        class="btn btn-primary"style="margin-bottom:20px; width:0.75in;border-radius:4px;margin-left:15px;">
    <fa-icon></fa-icon>&nbsp;<span>Pdf</span>
</button>
<div *ngIf="this.showBill" class="container">

    <div class="square white " style=" padding-right:20px;padding-left:20px;margin-bottom:20px;">

        <header class="test">
            <h1>Invoice</h1>
            <h1>United Builders And Engineers Private.Ltd</h1>
            <h1>Tripureshwor,Kathmandu,Nepal</h1>
            <h1>Tel:+977 156701,Fax:977 1234567.</h1>
        </header>
        <div  class="modal-body ">
            <div class="container pt-3 pb-3">
                <div class="row ">
                    <div class="col-md-6">
                        <p class="mb-1 font">Bill NO: {{bill.id}}</p>
                    </div>
                    <div class="col-md-6 text-right">
                        <p class="mb-1 font"><span>VAT No:</span>300042438</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <p class="mb-1 font"style="margin-top:15px;"><span>Name:</span>
                            <span class="underline underline--dotted">{{bill.customerN}}</span>
                        </p>
                    </div>
                    <div class="col-md-6 text-right">
                        <p class="mb-1 font" style="margin-top:10px;"><span>Date: </span><span>  {{bill.createdDate | date : 'medium'}}</span> </p>
                    </div>

                </div>
                       <div class="row">
                           <div class="col-md-6">
                               <p class="mb-1 font" style="margin-top:15px;"><span>Month:</span>
                                   <span class="underline underline--dotted">{{bill.month}}</span>
                               </p>
                           </div>
                           <div class="col-md-6 text-right">
                               <p class="mb-1 font" style="margin-top:15px;"><span>Payment Status:</span>
                                   <span class="underline underline--dotted text-danger">{{bill.paymentStatus}}</span>
                               </p>
                           </div>
                       </div>


                <div class="row">
                    <div class="col-md-8">
                        <p class="mb-1 font" style="margin-top:15px;"><span>Mode of Payment:</span>
                            <label for="cash1">Cash</label>
                            <input type="checkbox" id="cash1" name="cash1" value="Cash">
                            <label for="cash1" style="margin-left:5px;">Cheque</label>
                            <input type="checkbox" id="Cheque1" name="Cheque1" value="Cheque">
                            <label for="credit1" style="margin-left:5px;">Credit</label>
                            <input type="checkbox" id="Credit1" name="Credit1" value="Credit">
                            <label for="others" style="margin-left:5px;">Others</label>
                            <input type="checkbox" id="others" name="others" value="Others">
                        </p>
                    </div>
                </div>

                    <table class="table">
                        <table>

                            <thead>
                            <tr>
                                <th class="font" scope="col" style="text-align:center">S.No</th>
                                <th class="font" scope="col" style="text-align:center">Particulars</th>
                                <th class="font" scope="col" style="text-align:center">Amount</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <th class="font" scope="row">1</th>
                                <td class="font">Service Charge Amount</td>
                                <td class="tod1 font">{{bill.serviceChargeAmount}}</td>
                            </tr>
                            <tr>
                                <th class="font" scope="row">2</th>
                                <td class="font"><span>Water Rate </span></td>
                                <td class="tod1 font">{{bill.waterRate}}</td>
                            </tr>
                            <tr>
                                <th class="font" scope="row">3</th>
                                <td class="font">Electricity Rate</td>
                                <td class="tod1 font">{{bill.electricityRate}}</td>
                            </tr>

                            <tr>
                                <th class="font" scope="row">4</th>
                                <td class="font">Monthly Rent</td>
                                <td class="tod1 font">{{bill.monthlyRent}}</td>
                            </tr>

                            <tr class="font">
                                <th class="font" scope="row">5</th>
                                <td class="font"><span>Previous Reading</span></td>
                                <td class="tod1 font">{{bill.electricityFromUnit}}</td>
                            </tr>

                            <tr class="font">
                                <th class="font" scope="row">6</th>
                                <td class="font"><span>To Reading</span></td>
                                <td class="tod1 font">{{bill.electricityToUnit}}</td>
                            </tr>


                            <tr class="font">
                                <th class="font" scope="row">7</th>
                                <td class="font"><span>Total Reading</span></td>
                                <td class="tod1 font">{{bill.totalElectricityUnit}}</td>
                            </tr>

                            <tr >
                                <th class="font" scope="row">8</th>
                                <td class="font"><span>Electricity Discount Amount</span></td>
                                <td class="tod1 font">{{bill.electricityDiscountAmount}}</td>
                            </tr>

                            <tr >
                                <th class="font" scope="row">9</th>
                                <td class="font"><span>Electricity Fine Amount</span></td>
                                <td class="tod1 font">{{bill.electricityFineAmount}}</td>
                            </tr>


                            <tr >
                                <th class="font" scope="row">10</th>
                                <td class="font"><span>Electricity Amount</span></td>
                                <td class="tod1 font">{{bill.electricityAmount}}</td>
                            </tr>

                            <tr *ngIf="bill.paymentStatus!=='INCOMPLETE'">
                                <th class="font" scope="row">11</th>
                                <td class="font"><span>Discount Amount</span></td>
                                <td *ngIf="bill.discountAmount>0" class="tod1 font">-{{bill.discountAmount}}</td>
                                <td *ngIf="bill.discountAmount==0" class="tod1 font"> {{bill.discountAmount}} </td>
                            </tr>

                            <tr  *ngIf="bill.paymentStatus!=='INCOMPLETE'">
                                <th class="font" scope="row">12</th>
                                <td class="font"><span>Fine Amount</span></td>
                                <td class="tod1 font">{{bill.fineAmount}}</td>
                            </tr>

                            <tr *ngIf="bill.electricityDeduct && bill.electricityDeduct>0.0">
                                <th class="font" scope="row">13</th>
                                <td class="font"><span>Electricity Deduct Amount</span></td>
                                <td class="tod1 font">(-{{bill.electricityDeduct}})</td>
                            </tr>

                            <tr *ngIf="bill.serviceChargeDeduct && bill.serviceChargeDeduct>0.0">
                                <th class="font" scope="row">14</th>
                                <td class="font"><span>Service Charge Deduct Amount</span></td>
                                <td class="tod1 font">(-{{bill.serviceChargeDeduct}})</td>
                            </tr>
                            <tr *ngIf="bill.waterDeduct && bill.waterDeduct>0.0">
                                <th class="font" scope="row">15</th>
                                <td class="font"><span>Water Deduct Amount</span></td>
                                <td class="tod1 font">(-{{bill.waterDeduct}})</td>
                            </tr>

                            <tr *ngIf="bill.monthlyDeduct && bill.monthlyDeduct>0.0">
                                <th class="font" scope="row">16</th>
                                <td class="font"><span>Monthy Deduct Amount</span></td>
                                <td class="tod1 font">(-{{bill.monthlyDeduct}})</td>
                            </tr>

<!--                            <tr>-->
<!--                                <th class="font" scope="row">16</th>-->
<!--                                <td class="font"><span>With Vat</span></td>-->
<!--                                <td class="tod1 font">{{bill.totalVat}}</td>-->
<!--                            </tr>-->

                            <tr *ngIf="bill.tdsDeduct && bill.tdsDeduct>0.0">
                                <th class="font" scope="row">17</th>
                                <td class="font"><span>Tds Deduct Amount</span></td>
                                <td class="tod1 font">(-{{bill.tdsDeduct}})</td>
                            </tr>

                            <tr *ngIf="bill.billAdjust && bill.billAdjust>0.0">
                                <th class="font" scope="row">18</th>
                                <td class="font"><span> Bill Adjust Amount</span></td>
                                <td class="tod1 font">(-{{bill.billAdjust}})</td>
                            </tr>

                            <tr *ngIf="bill.electricityOpeningBalance && bill.electricityOpeningBalance>0.0">
                                <th class="font" scope="row">18</th>
                                <td class="font"><span> Electricity Opening Amount</span></td>
                                <td class="tod1 font">({{bill.electricityOpeningBalance}})</td>
                            </tr>

                            <tr *ngIf="bill.serviceOpeningBalance && bill.serviceOpeningBalance>0.0">
                                <th class="font" scope="row">18</th>
                                <td class="font"><span> Service Opening Amount</span></td>
                                <td class="tod1 font">({{bill.serviceOpeningBalance}})</td>
                            </tr>

                            <tr *ngIf="bill.rentOpeningBalance && bill.rentOpeningBalance>0.0">
                                <th class="font" scope="row">18</th>
                                <td class="font"><span> Monthly Rent Opening Amount</span></td>
                                <td class="tod1 font">({{bill.rentOpeningBalance}})</td>
                            </tr>


                            <tr  *ngIf="bill.paymentStatus!=='INCOMPLETE'">
                                <th class="font" scope="row"></th>
                                <td class="font"><span>Sub Total</span></td>
                                <td class="tod1 font">{{this.sumOfAmount  | number : '1.2-2'}}</td>
                            </tr>


                            <tr *ngIf=" bill.paymentStatus!=='INCOMPLETE' &&
                                  bill.paymentStatus!=='PAID'">
                                <th scope="row"></th>
                                <td><span></span></td>
                                <td><button class="btn btn-primary" (click)="showDiscountForm()"> <span> Add More </span> </button> </td>
                            </tr>
                            </tbody>
                        </table>
                    </table>

                            <div *ngIf="showDiscount">
                                <form name="editForm" (ngSubmit)="save()"  role="form" novalidate [formGroup]="editForm">
                                    <input type="text" formControlName="id" hidden>
                                    <div class="form-group">
                                        <div formArrayName="addParticulars">
                                            <div *ngFor="let billParticular of billParticulars.controls; let i=index">
                                                <div [formGroupName]="i">
                                                    <div class="form-row">
                                                        <div class="form-group col-5">
                                                            <label class="form-control-label font">Remarks</label>
                                                            <input type="text"  id="remarks"
                                                                   class="form-control font"
                                                                   name="remarks"
                                                                   formControlName="remarks" required/>
                                                        </div>
                                                        <div class="form-group col-5">
                                                            <label class="form-control-label font">Discount Type</label>
                                                            <div class="d-flex">
                                                                <select  class="form-control font" name="discountType"
                                                                         formControlName="discountType" required>
                                                                    <option value="ADD">ADD</option>
                                                                    <option value="DEDUCT"> DEDUCT</option>
                                                                </select>
                                                            </div>
                                                        </div>

                                                        <div class="form-group col-5">
                                                            <label class="form-control-label">Amount Type</label>
                                                            <div class="d-flex">
                                                                <select  class="form-control" name="amountType"
                                                                         formControlName="amountType" required>
                                                                    <option value="FLAT">FLAT</option>
                                                                    <option value="PERCENTAGE"> PERCENTAGE</option>
                                                                </select>
                                                            </div>
                                                        </div>

                                                        <div class="form-group col-5">
                                                            <label class="form-control-label">Amount</label>
                                                            <div class="d-flex">
                                                                <input type="number"  id="amount"
                                                                       class="form-control"
                                                                       name="amount"
                                                                       formControlName="amount" required/>
                                                            </div>
                                                        </div>
                                                        <div class="form-group col-3" style="margin-top:40px;">
                                                          <span (click)="addNewBillParticulars()" class="btn btn-primary">Add more
                                                          </span>
                                                            <button *ngIf="i > 0" (click)="removeBillParticulars(i)"
                                                                    class="btn btn-danger"style="margin-top:10px;">Remove
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="margin-top: 20px;margin-bottom:20px;">
                                        <button type="button" (click)="reset()" id="cancel-save" class="btn btn-secondary">
                                            <fa-icon icon="ban"></fa-icon>&nbsp;<span
                                            jhiTranslate="entity.action.cancel">Cancel</span>
                                        </button>


                                        <button type="submit"   [disabled]="editForm.invalid || isSaving"
                                                class="btn btn-primary">
                                            <fa-icon icon="save"></fa-icon>&nbsp;<span jhiTranslate="entity.action.save">Save</span>
                                        </button>
                                    </div>
                                </form>
                            </div>


                    <!--  <table id="billdetail0" class="table table-striped table-bordered" aria-describedby="page-heading" style="margin-top:20px;">
                          <thead>
                          <tr>
                              <th colspan="7" >S.NO</th>
                          </tr>
                          </thead>
                      </table>

                      <table id="billdetail2" class="table table-striped table-bordered" aria-describedby="page-heading" style="margin-top:20px;">
                          <thead>
                          <tr>
                              <th colspan="7" >Remarks: Bill Invoice {{bill.paymentStatus}}</th>
                          </tr>
                          </thead>
                      </table>

                      <table id="billdetail1" class="table table-striped table-bordered" aria-describedby="page-heading"style="margin-top: 20px;">
                          <thead>
                            <tr>
                                <th colspan="7">Total Area :</th>
                                <td colspan="7">{{bill.totalArea}}</td>
                            </tr>
                          </thead>
                      </table>
                      <table id="billdetail4" class="table table-striped table-bordered" aria-describedby="page-heading">
                          <thead>
                          <tr>
                              <th colspan="7">Monthly Rate :</th>
                              <td colspan="7">{{bill.monthlyRate}}</td>
                          </tr>
                          </thead>
                      </table>-->
                    <!-- <table id="billdetail5" class="table table-striped table-bordered" aria-describedby="page-heading">
                         <thead>
                         <tr>
                             <th colspan="7">Service Charge Rate:</th>
                             <td colspan="7">{{bill.serviceChargeRate}}</td>
                         </tr>
                         </thead>
                     </table>-->

                    <table class="table">
                        <table>
                            <thead>
                            <tr>
                                <th class="font">Remarks: <u style="width:100%;">Bill Invoice {{bill.paymentStatus}}</u></th>
                            </tr>
                            <tr *ngIf="bill.paymentStatus!=='INCOMPLETE'" style="text-align: right;">
                                <th class="font" colspan="2"style="text-align:right;" ><span>Bill Amount</span></th>
                                <td class="font" style="padding-left:20px;"><span>{{bill.finalAmount}}</span></td>
                            </tr>
                            <tr *ngIf="bill.paymentStatus!=='INCOMPLETE'">
                                <th class="font" colspan="2"style="text-align:right;"><span> Total Amount Paid:</span></th>
                                <td class="font" style="padding-left:20px;"><span>{{bill.paidAmount}}</span></td>
                            </tr>
                            <tr *ngIf="bill.paymentStatus!=='INCOMPLETE'">
                                <th class="font" colspan="2"style="text-align:right;"><span>Amount Before Tax:</span></th>
                                <td class="font" style="padding-left:20px;">{{bill.taxableAmount}}</td>
                            </tr>
                            <tr *ngIf="bill.paymentStatus!=='INCOMPLETE'">
                                <th class="font" colspan="2"style="text-align:right;"><span>Tax Deducted at Source:</span></th>
                                <td class="font" style="padding-left:20px;">{{bill.tds}}</td>
                            </tr>

                            <tr *ngIf="bill.paymentStatus!=='INCOMPLETE'">
                                <th class="font" colspan="2"style="text-align:right;"><span>Total Vat:</span></th>
                                <td class="font" style="padding-left:20px;">{{bill.totalVat}}</td>
                            </tr>
                            </thead>
                        </table>
                    </table>


            </div>
        </div>


        <table style="margin-left:30px;width:95%;">
            <tr>
                <th class="font" colspan="14" style="text-align:left; margin-top:20px;">In Words: <span class="underline underline--dotted">{{bill.amountInWords}}</span></th>
            </tr>
        </table>


        <table style="border:none;text-align:left;margin-top:50px;margin-left:10px;">
            <tr *ngIf="bill.paymentStatus==='PAID'">
                <label style="margin-top:80px;"> {{bill.updatedBy}}</label>
                <hr style=" width:30%;background-color:black;text-align:left;margin-left:3px;">
                <label style="color:black">Approved By</label>
            </tr>
        </table>

        <table style="border:none;margin-top:50px;text-align:right;margin-bottom:80px;">
            <tr>
                <label class="font" style="margin-right:30px;color:black;">Signature</label>
                <hr style="color:black;background-color:black;width:30%;margin-right:20px;">
            </tr>
        </table>
    </div>

    <button class="btn btn-primary" *ngIf="bill.paymentStatus!=='PAID'" (click)="openElectricityForm()">
        <span>Add Electricity </span>
    </button>

</div>

<div *ngIf="!this.showBill">
    <form name="electricity unit" (ngSubmit)="processElectricity()">

        <label class="form-control-label" style=" display: inline-block;"> Electricity From Unit</label>
        <input type="text" class="form-control" name="electricityFromUnit" id="field_waterFromUnit"
               [(ngModel)]="this.electricityFromUnit"/>

        <label class="form-control-label" > Electricity To Unit </label>
        <input type="text" class="form-control" name="electricityFillUnit" id="field_waterFillUnit"
               [(ngModel)]="this.electricityToUnit"/>
        <div style="margin-bottom: 10px;margin-top: 20px; margin-left:10px;">
            <button type="reset" (click)="reset()" class="btn btn-secondary"style="background-color:red; color:white; border: 2px solid white; padding: 10px 10px;">
                <fa-icon icon="ban"></fa-icon>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
            </button>

            <button type="submit" id="save-entity"  class="btn btn-primary"  style="background-color: green;color:white; border:white; padding: 10px 10px;">
                <fa-icon icon="save"></fa-icon>&nbsp;<span>Save</span>
            </button>
        </div>
    </form>
</div>
</body>

